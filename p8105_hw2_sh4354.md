p8105_hw2_sh4354
================
Selina Hsuan
2023-10-04

\##PROBLEM 1

Load tidyverse library

``` r
library(tidyverse)
```

    ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
    ## ✔ dplyr     1.1.3     ✔ readr     2.1.4
    ## ✔ forcats   1.0.0     ✔ stringr   1.5.0
    ## ✔ ggplot2   3.4.3     ✔ tibble    3.2.1
    ## ✔ lubridate 1.9.2     ✔ tidyr     1.3.0
    ## ✔ purrr     1.0.2     
    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## ✖ dplyr::filter() masks stats::filter()
    ## ✖ dplyr::lag()    masks stats::lag()
    ## ℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors

Import pols_month

``` r
polsmonth_df = 
  read_csv("data/pols-month.csv") |> 
  janitor::clean_names() |> 
  separate(mon, into = c("year", "month", "day"), sep ="-") |> 
  mutate(month = month.abb[as.numeric(month)])
```

    ## Rows: 822 Columns: 9
    ## ── Column specification ────────────────────────────────────────────────────────
    ## Delimiter: ","
    ## dbl  (8): prez_gop, gov_gop, sen_gop, rep_gop, prez_dem, gov_dem, sen_dem, r...
    ## date (1): mon
    ## 
    ## ℹ Use `spec()` to retrieve the full column specification for this data.
    ## ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.

\##PROBLEM 2

Import and clean Mr. Trash Wheel Sheet

``` r
mrtrash_df =
  readxl::read_excel("data/202207 Trash Wheel Collection Data.xlsx", sheet = "Mr. Trash Wheel", range = "A2:N549") |> 
  janitor::clean_names() |> 
  mutate(
    homes_powered = (weight_tons*500)/30
)
```

Import and clean Professor Trash Wheel and Gwynnda Sheets

``` r
proftrash_df =
  readxl::read_excel("data/202207 Trash Wheel Collection Data.xlsx", sheet = "Professor Trash Wheel", range = "A2:M96") |> 
  janitor::clean_names() |> 
  mutate(
    homes_powered = (weight_tons*500)/30
)
  

gwynnda_df =
  readxl::read_excel("data/202207 Trash Wheel Collection Data.xlsx", sheet = "Gwynnda Trash Wheel", range = "A2:K108") |> 
  janitor::clean_names() |> 
  mutate(
    homes_powered = (weight_tons*500)/30
)
```

Combine datasets

``` r
mrtrash_df$year = as.numeric(mrtrash_df$year)

trash_df = 
  bind_rows (mrtrash_df, proftrash_df, gwynnda_df) |> 
  janitor::clean_names()
```

Find number of cigarette butts collected by Gwynnda in July of 2021

``` r
gwynnda_cig =
  filter(gwynnda_df, month == "July", year == 2021) |> 
  summarise(total_cigarette_butts = sum(cigarette_butts))
```

The Mr. Trash Wheel, Professor Trash Wheel, and Gwynnda Trash Wheel
datasets were imported using readxl::read_excel and correspond to three
different sheets on an Excel document. Each dataset was cleaned using
janitor::cleannames, and the mutate function was used to calculate the
number of homes powered for each observation. The datasets were merged
using the bind_rows function they each contained almost the same
variables. By using the bind_rows function, we are able to see the
observations for each dumpster more clearly. There are 747 observations
and 15 variables in the resulting dataset. The variables are dumpster,
month, year, date, weight_tons, volume_cubic_yards, plastic_bottles,
polystyrene, cigarette_butts, glass_bottles, grocery_bags, chip_bags,
sports_balls, homes_powered, plastic_bags. The total weight of trash
collected by Mr. Trash Wheel is 1748.36. The total number of cigarette
butts collected by Gwynnda in July of 2021 is 1.63^{4}.

\##PROBLEM 3

Import, clean, and tidy baseline demographics dataset

``` r
baseline_df =
  read_csv("data/MCI_baseline.csv") |> 
  janitor::row_to_names(row_number = 1) |> 
  janitor::clean_names() |> 
  mutate(
    sex = ifelse(
      sex == "1", "male", "female")) |> 
  mutate(
    apoe4 = ifelse(
      apoe4 == "1", "carrier", "non-carrier")) |> 
  filter(age_at_onset != ".") |> 
  rename(study_id = id)
```

    ## New names:
    ## Rows: 484 Columns: 6
    ## ── Column specification
    ## ──────────────────────────────────────────────────────── Delimiter: "," chr
    ## (6): ...1, Age at the study baseline, 1 = Male, 0 = Female, Years of edu...
    ## ℹ Use `spec()` to retrieve the full column specification for this data. ℹ
    ## Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## • `` -> `...1`

Convert current_age to numeric values

``` r
baseline_df$current_age = as.numeric(baseline_df$current_age)
```

Find proportion of females who are carriers

``` r
proportion =
  filter(baseline_df, sex == "female", apoe4 == "carrier") |> 
  nrow() / sum(baseline_df$sex == "female")
```

The MCI baseline dataset was imported using read_csv. Since the first
row of the dataset consisted of the column names, janitor::row_to_names
was used to make row 1 values the column names. The column names were
converted to the proper format using janitor::cleannames. Next, to
convert the variables sex and apoe4 to character values instead of
numbers, the mutate function and ifelse statement was used. Finally, to
remove participants who do not meet the stated criteria of developing
MCI from baseline, non-values in the age_at_onset column were removed
using the filter function. The 6 variables in the dataset are study_id,
current_age, sex, education, apoe4, age_at_onset. Out of the 483
participants who were recruited, a total of 97 participants developed
MCI. Out of the participants who met the study criteria, the average
baseline age was 65.6113402, and the proportion of women in the study
who are APOE4 carriers is 0.6521739.

Import, clean, and tidy amyloid dataset

``` r
amyloid_df =
  read_csv("data/mci_amyloid.csv") |> 
  janitor::row_to_names(row_number = 1) |> 
  janitor::clean_names() 
```

    ## New names:
    ## Rows: 488 Columns: 6
    ## ── Column specification
    ## ──────────────────────────────────────────────────────── Delimiter: "," chr
    ## (6): Study ID, Time (in years) elapsed since the study baseline to the v...
    ## ℹ Use `spec()` to retrieve the full column specification for this data. ℹ
    ## Specify the column types or set `show_col_types = FALSE` to quiet this message.
    ## • `NA` -> `NA...3`
    ## • `NA` -> `NA...4`
    ## • `NA` -> `NA...5`
    ## • `NA` -> `NA...6`

The MCI amyloid dataset was imported using read_csv. Since the first row
of the dataset consisted of the column names, janitor::row_to_names was
used to make row 1 values the column names. The column names were
converted to the proper format using janitor::cleannames. The 6
variables in the dataset are study_id, baseline, time_2, time_4, time_6,
time_8.

There are 487 observations in the dataset, which is more than the 483
that were in the original baseline demographics dataset. Therefore,
after cleaning the baseline demographics dataset, there are some
participants who only appear in the amyloid dataset and possibly some
participants who only appear in the baseline dataset.

``` r
mci_df = 
  inner_join(baseline_df, amyloid_df, by = "study_id")
```

The baseline and amyloid datasets were combined using inner_join so that
only participants who appeared in both datasets were retained. The
resulting MCI dataset contains 94 observations, which is less than
either of the original datasets since observations that only appear in
one dataset are not included. There are 11 variables, which is more than
either of the original datasets since variables in both datasets are
included.

save combined dataset as csv

``` r
write.csv(mci_df, file = "results/mci_df.csv")
```
